{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"FFXI Auction House Bot","text":"<p>A set of command-line tools for interacting with the auction house of a private FFXI server.</p> <p>Please see the docs for more information.</p> <p>This project was originally developed for the Darkstar server, but it will also work with new variations below.</p> FFXI Server Project Status Darkstar defunct Topaz defunct Topaz-next defunct LandSandBoat current"},{"location":"#features","title":"Features","text":"<ul> <li>Create a database of item prices by scraping ffxiah.com.</li> <li>Start a bot that can buy items put up for sale by players.</li> <li>The bot can also stock the auction house with items for players to buy.</li> </ul>"},{"location":"advanced/","title":"Advanced","text":"<p>Here are some alternative ways to install <code>ffxiahbot</code> if you are familiar with Python and its package management tools.</p>"},{"location":"advanced/#installation-using-uv","title":"Installation using uv","text":"<pre><code>uvx ffxiahbot --help\n</code></pre>"},{"location":"advanced/#installation-using-pipx","title":"Installation using pipx","text":"<pre><code>pipx install ffxiahbot\nffxiahbot --help\n</code></pre>"},{"location":"advanced/#installation-into-a-virtual-environment-pyenv-pip","title":"Installation into a virtual environment (pyenv + pip)","text":"<pre><code>pyenv install 3.13\npyenv local 3.13\npip install virtualenv\npython3 -m virtualenv venv\nsource venv/bin/activate\npip install ffxiahbot\nffxiahbot --help\n</code></pre>"},{"location":"advanced/#run-from-source","title":"Run from source","text":"<pre><code>git clone https://github.com/AdamGagorik/ffxiahbot.git\nexport PYTHONPATH=$PYTHONPATH:$(pwd)/src\nsource venv/bin/activate\npython -m ffxiahbot --help\n</code></pre>"},{"location":"setup/","title":"Setup","text":""},{"location":"setup/#step-1-install-uv","title":"Step 1: Install uv","text":"<pre><code># Linux\ncurl -LsSf https://astral.sh/uv/install.sh | sh\n</code></pre> <pre><code># Windows\npowershell -c \"irm https://astral.sh/uv/install.ps1 | iex\"\n</code></pre>"},{"location":"setup/#step-2-run-the-app","title":"Step 2: Run the app","text":"<pre><code>git clone https://github.com/AdamGagorik/ffxiahbot.git\ncd ffxiahbot/bin\nuv run ffxiahbot --help\n</code></pre>"},{"location":"setup/#step-3-configure-the-bot","title":"Step 3: Configure the bot","text":"<p>Follow the instructions on the usage page.</p>"},{"location":"usage/","title":"Usage","text":""},{"location":"usage/#tldr","title":"TLDR","text":"<p>Edit the <code>config.yaml</code> and <code>items.csv</code> files in the <code>bin</code> folder.</p> <ul> <li><code>config.yaml</code></li> <li><code>items.csv</code></li> </ul> <p>From the <code>bin</code> folder, run any of the following commands:</p> <pre><code>uv run ffxiahbot broker\nuv run ffxiahbot clear\nuv run ffxiahbot refill\nuv run ffxiahbot scrub\n</code></pre> <p>Important</p> <p>Run the <code>ffxiahbot</code> command inside a directory that contains a <code>config.yaml</code> and optionally an <code>items.csv</code>.</p> <p>Warning</p> <p>The way you run the ffxiahbot command depends on how you installed it.</p> Installation Method Command uv <code>uv run ffxiahbot --help</code> pipx <code>ffxiahbot --help</code>"},{"location":"usage/#creating-the-config-file","title":"Creating the Config File","text":"<p>You must create a YAML file to configure the tool (<code>config.yaml</code>). All other options are passed as command line arguments.</p> <pre><code># ah\nname: M.H.M.U. # Name that appears on AH when buying and selling\ntick: 30 # seconds between buying\nrestock: 3600 # seconds between selling\nuse_buying_rates: false  # Only buy items a fraction of the time?\nuse_selling_rates: false  # Only sell items a fraction of the time?\n\n# sql\nhostname: 127.0.0.1 # SQL parameter\ndatabase: xidb # SQL parameter\nusername: root # SQL parameter\npassword: root # SQL parameter\nport: 3306 # SQL parameter\nfail: true # fail on SQL database errors?\n</code></pre>"},{"location":"usage/#running-the-cli","title":"Running the CLI","text":"<p>Simply run the <code>ffxiahbot</code> from the command line. Specify the app you want to run and any flags you want to set.</p> <p>Warning</p> <p>Common command line flags like --verbose must come before the name of the app to run. App specific command line flags must come after the name of the app to run.</p> <pre><code>\u279c  uv run python -m ffxiahbot --help\n\n Usage: python -m ffxiahbot [OPTIONS] COMMAND [ARGS]...                         \n\n The script will interact with the Auction House of a private Final Fantasy XI  \n server.                                                                        \n\n\u256d\u2500 Options \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 --version                      Show version string.                          \u2502\n\u2502 --silent                       Only show ERROR messages.                     \u2502\n\u2502 --verbose                      Also show DEBUG messages.                     \u2502\n\u2502 --logfile                PATH  The path to the log file.                     \u2502\n\u2502                                [default: ahbot.log]                          \u2502\n\u2502 --disable-logfile              Disable logging to a file.                    \u2502\n\u2502 --help                         Show this message and exit.                   \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n\u256d\u2500 Commands \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 broker   Run a bot that buys and sells items on the auction house            \u2502\n\u2502          continuously.                                                       \u2502\n\u2502 clear    Delete items from the auction house (dangerous operation!).         \u2502\n\u2502 refill   Refill the auction house with the items defined in the CSV file.    \u2502\n\u2502 scrub    Download a list of item prices from ffxiah.com and save to a CSV    \u2502\n\u2502          file.                                                               \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre> <p>Note</p> <p>You do not actually need a live or production SQL database to test these commands.</p> <ul> <li>Instead, you can pass the <code>--use-sqlite-db</code> flag to use a fake SQLite database instead.</li> <li>This will manipulate a SQLite database file on your machine instead of a real server's database.</li> <li>You can then inspect the database with any tool that can read SQLite databases.</li> </ul>"},{"location":"usage/#downloading-a-new-items-csv","title":"Downloading a new Items CSV","text":"<p>This command will download item data from ffxiah.com and save it to a CSV file.</p> <pre><code>\u279c  uv run ffxiahbot --verbose scrub\n\u279c  uv run ffxiahbot --verbose scrub --server ASURA\n\u279c  uv run ffxiahbot --verbose scrub --item-id 1 --item-id 2 --item-id 3\n\u279c  uv run ffxiahbot --verbose scrub --cat-url http://www.ffxiah.com/browse/62/grips\n</code></pre> <p>Important</p> <p>There is a pre-built CSV file in the repo, so you do not need to run this command if you don't want to.</p> <p>Note</p> <p>Pass the  <code>--cache .cache</code> flag to the <code>scrub</code> app to save intermediate data during the scrubbing process. This will allow you to resume the scrubbing process if it is interrupted. Delete the <code>.cache</code> folder to start the scrubbing process from scratch.</p> <p>Note</p> <p>Set FFXIAHBOT_SCRUB_MAX_FAILURES=N to the number of failures (N) you are willing to accept before the scrubber stops.</p> <p>Note</p> <p>Enable the asyncio logger by setting FFXIAHBOT_SCRUB_DEBUG_ASYNCIO=1</p> <pre><code>\u279c  uv run python -m ffxiahbot scrub --help\n\n Usage: python -m ffxiahbot scrub [OPTIONS]                                     \n\n Download a list of item prices from ffxiah.com and save to a CSV file.         \n\n\u256d\u2500 Options \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 --config              PATH     Config file path. [default: config.yaml]      \u2502\n\u2502 --out-csv             PATH     The output CSV file to save.                  \u2502\n\u2502                                [default: items.csv]                          \u2502\n\u2502 --server              SERVER   The server name (asura, bahamut, etc).        \u2502\n\u2502                                [default: ASURA]                              \u2502\n\u2502 --cat-url             TEXT     Preset category URLs.                         \u2502\n\u2502 --item-id             INTEGER  Preset item IDs.                              \u2502\n\u2502 --overwrite                    Overwrite output CSV?                         \u2502\n\u2502 --stock-single        INTEGER  The default number of items for singles.      \u2502\n\u2502                                [default: 10]                                 \u2502\n\u2502 --stock-stacks        INTEGER  The default number of items for stacks.       \u2502\n\u2502                                [default: 10]                                 \u2502\n\u2502 --backup                       Backup output CSV?                            \u2502\n\u2502 --cache               PATH     A directory to cache the fetched data         \u2502\n\u2502 --help                         Show this message and exit.                   \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre>"},{"location":"usage/#refilling-the-auction-house","title":"Refilling the Auction House","text":"<p>Important</p> <p>Run the <code>refill</code> app to populate the AH if you want to buy items immediately!</p> <pre><code>\u279c  uv run ffxiahbot refill --inp-csv items.csv\n</code></pre> <pre><code>\u279c  uv run python -m ffxiahbot refill --help\n\n Usage: python -m ffxiahbot refill [OPTIONS]                                    \n\n Refill the auction house with the items defined in the CSV file.               \n\n\u256d\u2500 Options \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 --config               PATH  Config file path. [default: config.yaml]        \u2502\n\u2502 --inp-csv              PATH  Input CSV file path. [default: (items.csv)]     \u2502\n\u2502 --no-prompt                  Do not ask for confirmation.                    \u2502\n\u2502 --use-sqlite-db        PATH  Use a test SQLite database instead of the real  \u2502\n\u2502                              one?                                            \u2502\n\u2502 --help                       Show this message and exit.                     \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre>"},{"location":"usage/#clearing-the-auction-house","title":"Clearing the Auction House","text":"<p>This command will remove all items for sale from the AH.</p> <p>Warning</p> <p>This command is pretty destructive, so be careful!</p> <p>Important</p> <p>Unless <code>--all</code> is specified, this command will only clear items that are for sale by the bot.</p> <pre><code>\u279c  uv run python -m ffxiahbot clear --help\n\n Usage: python -m ffxiahbot clear [OPTIONS]                                     \n\n Delete items from the auction house (dangerous operation!).                    \n\n\u256d\u2500 Options \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 --config               PATH  Config file path. [default: config.yaml]        \u2502\n\u2502 --no-prompt                  Do not ask for confirmation.                    \u2502\n\u2502 --all                        Clear all items.                                \u2502\n\u2502 --use-sqlite-db        PATH  Use a test SQLite database instead of the real  \u2502\n\u2502                              one?                                            \u2502\n\u2502 --help                       Show this message and exit.                     \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre>"},{"location":"usage/#running-the-ah-broker-bot","title":"Running the AH Broker Bot","text":"<pre><code>\u279c  uv run ffxiahbot broker --inp-csv items.csv --buy-items --sell-items\n</code></pre> <p>Warning</p> <p>The <code>broker</code> will wait until the 1st cycle defined in your config before populating items.</p> <pre><code>\u279c  uv run python -m ffxiahbot broker --help\n\n Usage: python -m ffxiahbot broker [OPTIONS]                                    \n\n Run a bot that buys and sells items on the auction house continuously.         \n\n\u256d\u2500 Options \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 --config                                    PATH  Config file path.          \u2502\n\u2502                                                   [default: config.yaml]     \u2502\n\u2502 --inp-csv                                   PATH  Input CSV file path.       \u2502\n\u2502                                                   [default: (items.csv)]     \u2502\n\u2502 --buy-items              --no-buy-items           Enable the buying of       \u2502\n\u2502                                                   items.                     \u2502\n\u2502                                                   [default: buy-items]       \u2502\n\u2502 --sell-items             --no-sell-items          Enable the selling of      \u2502\n\u2502                                                   items.                     \u2502\n\u2502                                                   [default: sell-items]      \u2502\n\u2502 --buy-immediately                                 Buy items immediately      \u2502\n\u2502                                                   instead of waiting?        \u2502\n\u2502 --restock-immediately                             Restock items immediately  \u2502\n\u2502                                                   instead of waiting?        \u2502\n\u2502 --use-sqlite-db                             PATH  Use a test SQLite database \u2502\n\u2502                                                   instead of the real one?   \u2502\n\u2502 --help                                            Show this message and      \u2502\n\u2502                                                   exit.                      \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre>"},{"location":"usage/#manually-editing-the-items-csv","title":"Manually Editing the Items CSV","text":"<ul> <li>Item data is stored in items.csv (you can edit it with a text editor or   Excel)</li> <li>There is an already generated items.csv in the bin folder for you</li> </ul> <p>Warning</p> <ul> <li>There is no reason to run the scrub app as an <code>items.csv</code> is included already in the repository!</li> <li>You do not need to regenerate the database even if you think it is old!</li> <li>You can cause yourself pricing issues, you have been warned!</li> </ul> <p>Warning</p> <p>Retail sometimes has unexpected prices in the history.</p> <ul> <li>There may be ancient entries.</li> <li>An item may have a selling price below an NPC buying price.</li> <li>An item may only really sell as either a stack or a single.</li> </ul> <p>This may result in exploits on your server if you are not careful.</p> column description value note itemid unique item id integer &gt;=0 name item name string sell_single sell single? 0=false 1=true buy_single buy single? 0=false 1=true price_single price for single integer &gt;=1 stock_single restock count (single) integer &gt;=0 sell_rate_single sell rate (single) float 0 &lt;= x &lt;= 1 disabled unless use_selling_rates=true buy_rate_single buy rate (single) float 0 &lt;= x &lt;= 1 disabled unless use_buying_rates=true sell_stacks sell stack? 0=false 1=true buy_stacks buy stack? 0=false 1=true price_stacks price for stack integer &gt;=1 stock_stacks restock count (stack) integer &gt;=0 sell_rate_stacks sell rate (stack) float 0 &lt;= x &lt;= 1 disabled unless use_selling_rates=true buy_rate_stacks buy rate (stack) float 0 &lt;= x &lt;= 1 disabled unless use_buying_rates=true"}]}